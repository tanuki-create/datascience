# インターバル問題 (Intervals)

## 概要

インターバル問題は、時間範囲、数値範囲、区間などの**インターバル（区間）を扱う問題**です。会議室の予約、イベントのスケジューリング、範囲のマージなど、多くの実用的な問題で使用されます。ソートと適切な処理順序が鍵となります。

## 基本概念

### インターバルの表現

1. **開始点と終了点**: `[start, end]`で表現
2. **包含関係**: インターバルAがインターバルBに含まれるか
3. **重複**: 2つのインターバルが重複しているか
4. **マージ**: 重複するインターバルを1つに統合

### 主な操作と計算量

| 操作 | 時間計算量 | 空間計算量 | 適用場面 |
|------|-----------|-----------|---------|
| ソート | O(n log n) | O(1) | インターバルの整理 |
| マージ | O(n) | O(n) | 重複するインターバルの統合 |
| 挿入 | O(n) | O(n) | 新しいインターバルの挿入 |
| 重複チェック | O(n log n) | O(1) | 重複の検出 |

**注意**: インターバル問題では、通常最初にソートを行うことで、効率的に処理できます。

## いつ使うべきか

インターバル問題は以下のような場面で威力を発揮します：

### 1. スケジューリング問題
- 会議室の予約
- イベントのスケジューリング
- タスクの割り当て

### 2. 範囲のマージ
- 重複する範囲を統合
- 連続する範囲を結合

### 3. 範囲の挿入
- 新しい範囲を適切な位置に挿入
- 既存の範囲と統合

### 4. 範囲のクエリ
- 特定の範囲に含まれるインターバルを検索
- 範囲の重複をチェック

## 現実世界での応用例

### 1. 会議室予約システム
- **例**: 会議室の予約を管理し、重複を避ける
- **実装**: インターバルをソートし、重複をチェック
- **メリット**: 効率的な予約管理

### 2. カレンダーアプリケーション
- **例**: カレンダーで、イベントの重複をチェック
- **実装**: インターバルをソートし、重複を検出
- **メリット**: 効率的なイベント管理

### 3. ネットワークの帯域幅管理
- **例**: ネットワークで、帯域幅の使用時間を管理
- **実装**: インターバルをソートし、重複を統合
- **メリット**: 効率的な帯域幅管理

### 4. データベースのクエリ最適化
- **例**: データベースで、時間範囲のクエリを最適化
- **実装**: インターバルをソートし、効率的にクエリ
- **メリット**: クエリの実行時間を短縮

### 5. ゲーム開発
- **例**: ゲームで、イベントの時間範囲を管理
- **実装**: インターバルをソートし、重複を処理
- **メリット**: 効率的なイベント管理

### 6. 金融取引システム
- **例**: 金融取引で、取引時間の範囲を管理
- **実装**: インターバルをソートし、重複を統合
- **メリット**: 効率的な取引管理

## 実装時の注意点

### 1. ソートの重要性
- **問題**: インターバルをソートすることで、処理が簡単になる
- **解決策**: 開始点でソート（終了点でソートする場合もある）
- **実装**: `intervals.sort(key=lambda x: x[0])`
- **メリット**: 重複チェックやマージが効率的に

### 2. 重複の判定
- **問題**: 2つのインターバルが重複しているか判定
- **解決策**: `intervals[i].end >= intervals[j].start`で重複を判定
- **実装**: ソート後、隣接するインターバルのみをチェック
- **注意**: 重複の定義を明確にする必要がある

### 3. マージ操作
- **問題**: 重複するインターバルを1つに統合
- **解決策**: 開始点の最小値と終了点の最大値を取る
- **実装**: `[min(start1, start2), max(end1, end2)]`
- **注意**: マージの条件を正確に理解する必要がある

### 4. エッジケースの処理
- **問題**: 空のリスト、1つのインターバル、重複がない場合
- **解決策**: 各操作でエッジケースをチェック
- **実装**: `if not intervals: return []`などのチェック
- **注意**: エッジケースを忘れると、エラーが発生

### 5. 包含関係の判定
- **問題**: インターバルAがインターバルBに含まれるか判定
- **解決策**: `A.start >= B.start and A.end <= B.end`
- **実装**: 包含関係を正確に判定
- **注意**: 等号を含めるかどうかを明確にする

## 関連するLeetCode/AtCoder問題

### Medium
- [Merge Intervals](./merge_intervals_logic.md) - インターバルのマージ
- [Insert Interval](./insert_interval_logic.md) - インターバルの挿入
- [Non-overlapping Intervals](./non_overlapping_intervals_logic.md) - 重複の削除
- [Meeting Rooms](./meeting_rooms_logic.md) - 会議室の予約

### Hard
- [Meeting Rooms II](../leetcode/medium/) - 複数の会議室
- [Employee Free Time](../leetcode/hard/) - 空き時間の検出

## 学習の進め方

1. **Merge Intervals**から始める: インターバル問題の最も基本的な例
2. **Insert Interval**で挿入操作を学ぶ: 新しいインターバルの処理
3. **Non-overlapping Intervals**で重複削除を学ぶ: 貪欲法の応用
4. **より複雑な問題**に挑戦: 他のテクニックと組み合わせた使用法を学ぶ

## 次のステップ

- [Merge Intervals のロジック解説](./merge_intervals_logic.md)
- [Insert Interval のロジック解説](./insert_interval_logic.md)
- [ソートテクニック](../06_sorting/README.md) - インターバル問題と組み合わせて使用

---

**重要**: インターバル問題では、ソートが鍵となります。ソートすることで、重複チェックやマージが効率的に行えます。

